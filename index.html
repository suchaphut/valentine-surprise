<!doctype html>
<html lang="th">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Happy Valentine's Day üíñ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <style>
      /* ===== RESET & BASE STYLES ===== */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        -webkit-tap-highlight-color: transparent;
      }

      body {
        font-family: "Poppins", sans-serif;
        overflow-x: hidden;
        background: linear-gradient(
          135deg,
          #ffd6e8 0%,
          #ffb3d9 50%,
          #ff99cc 100%
        );
        min-height: 100vh;
        position: relative;
      }

      /* ===== CONTAINER & LAYOUT ===== */
      .container {
        width: 100%;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
        position: relative;
        z-index: 10;
      }

      /* ===== PIN PAGE STYLES ===== */
      .pin-page {
        text-align: center;
        animation: fadeIn 0.8s ease-in;
        width: 100%;
        max-width: 500px;
        padding: 20px;
      }

      .pin-page.hidden {
        display: none;
      }

      .pin-title {
        font-family: "Playfair Display", serif;
        font-size: clamp(2rem, 8vw, 3.5rem);
        color: #d91e63;
        margin-bottom: 10px;
        font-weight: 900;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        line-height: 1.2;
      }

      .pin-subtitle {
        font-size: clamp(1rem, 4vw, 1.2rem);
        color: #c2185b;
        margin-bottom: 30px;
        font-weight: 300;
        letter-spacing: 1px;
      }

      .pin-input-container {
        display: flex;
        gap: 10px;
        justify-content: center;
        margin-bottom: 25px;
        flex-wrap: nowrap;
        max-width: 100%;
      }

      .pin-input {
        width: clamp(50px, 15vw, 70px);
        height: clamp(50px, 15vw, 70px);
        font-size: clamp(1.2rem, 5vw, 2rem);
        text-align: center;
        border: 3px solid #ff1493;
        border-radius: 12px;
        background: rgba(255, 255, 255, 0.95);
        color: #d91e63;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.3s ease;
        font-family: "Poppins", sans-serif;
        touch-action: manipulation;
      }

      .pin-input:focus {
        outline: none;
        border-color: #c2185b;
        box-shadow: 0 0 20px rgba(201, 24, 91, 0.4);
        transform: scale(1.05);
      }

      .pin-input::placeholder {
        color: #ffb3d9;
      }

      .pin-button {
        background: linear-gradient(135deg, #ff1493 0%, #d91e63 100%);
        color: white;
        border: none;
        padding: 15px 35px;
        font-size: clamp(1rem, 4vw, 1.1rem);
        border-radius: 50px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s ease;
        box-shadow: 0 5px 20px rgba(217, 30, 99, 0.3);
        font-family: "Poppins", sans-serif;
        touch-action: manipulation;
        width: 100%;
        max-width: 300px;
      }

      .pin-button:active {
        transform: scale(0.95);
        box-shadow: 0 3px 15px rgba(217, 30, 99, 0.4);
      }

      .error-message {
        color: #c2185b;
        font-size: clamp(0.9rem, 3.5vw, 1rem);
        margin-top: 20px;
        font-weight: 500;
        min-height: 24px;
        animation: shake 0.5s ease-in-out;
      }

      /* ===== LOVE PAGE STYLES ===== */
      .love-page {
        text-align: center;
        animation: fadeIn 1s ease-in;
        width: 100%;
        max-width: 900px;
        padding: 20px;
      }

      .love-page.hidden {
        display: none;
      }

      .love-main-text {
        font-family: "Playfair Display", serif;
        font-size: clamp(2rem, 10vw, 4rem);
        color: #d91e63;
        margin-bottom: 15px;
        font-weight: 900;
        text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.1);
        animation: slideDown 1s ease-out;
        line-height: 1.2;
      }

      .love-name {
        font-size: clamp(1.5rem, 6vw, 2.5rem);
        color: #c2185b;
        margin-bottom: 25px;
        font-weight: 700;
        animation: slideDown 1.2s ease-out;
      }

      .love-message {
        font-size: clamp(0.95rem, 3.5vw, 1.1rem);
        color: #6d1b47;
        line-height: 1.8;
        margin-bottom: 30px;
        font-weight: 400;
        animation: slideDown 1.4s ease-out;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
        padding: 0 10px;
      }

      .kiss-button {
        background: linear-gradient(135deg, #ff1493 0%, #d91e63 100%);
        color: white;
        border: none;
        padding: 15px 35px;
        font-size: clamp(1rem, 4vw, 1.1rem);
        border-radius: 50px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s ease;
        box-shadow: 0 5px 20px rgba(217, 30, 99, 0.3);
        font-family: "Poppins", sans-serif;
        margin-top: 10px;
        touch-action: manipulation;
        width: 100%;
        max-width: 300px;
      }

      .kiss-button:active {
        transform: scale(0.95);
        box-shadow: 0 3px 15px rgba(217, 30, 99, 0.4);
      }

      /* ===== GALLERY STYLES ===== */
      .gallery-section {
        margin-top: 40px;
        animation: slideUp 1.6s ease-out;
        padding: 0 10px;
      }

      .gallery-title {
        font-family: "Playfair Display", serif;
        font-size: clamp(1.5rem, 5vw, 2rem);
        color: #d91e63;
        margin-bottom: 20px;
        font-weight: 700;
      }

      .gallery-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
        gap: 12px;
        margin-bottom: 30px;
        max-width: 100%;
      }

      @media (min-width: 480px) {
        .gallery-grid {
          grid-template-columns: repeat(2, 1fr);
          gap: 15px;
        }
      }

      @media (min-width: 768px) {
        .gallery-grid {
          grid-template-columns: repeat(3, 1fr);
          gap: 20px;
        }
      }

      .gallery-item {
        position: relative;
        overflow: hidden;
        border-radius: 15px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
        cursor: pointer;
        transition: all 0.3s ease;
        aspect-ratio: 1;
        background: rgba(255, 255, 255, 0.9);
        touch-action: manipulation;
      }

      .gallery-item:active {
        transform: scale(0.95);
      }

      .gallery-item img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.3s ease;
      }

      /* ===== FLOATING HEARTS ANIMATION ===== */
      .floating-hearts {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 1;
        overflow: hidden;
      }

      .heart {
        position: absolute;
        font-size: clamp(1.2rem, 4vw, 2rem);
        opacity: 0.7;
        animation: float 6s ease-in infinite;
        will-change: transform;
      }

      .heart:nth-child(1) {
        left: 10%;
        animation-delay: 0s;
      }
      .heart:nth-child(2) {
        left: 20%;
        animation-delay: 1s;
      }
      .heart:nth-child(3) {
        left: 30%;
        animation-delay: 2s;
      }
      .heart:nth-child(4) {
        left: 40%;
        animation-delay: 0.5s;
      }
      .heart:nth-child(5) {
        left: 50%;
        animation-delay: 1.5s;
      }
      .heart:nth-child(6) {
        left: 60%;
        animation-delay: 2.5s;
      }
      .heart:nth-child(7) {
        left: 70%;
        animation-delay: 0.8s;
      }
      .heart:nth-child(8) {
        left: 80%;
        animation-delay: 1.8s;
      }
      .heart:nth-child(9) {
        left: 90%;
        animation-delay: 2.2s;
      }

      /* ===== SPARKLE EFFECT ===== */
      .sparkle {
        position: absolute;
        pointer-events: none;
      }

      .sparkle-particle {
        position: absolute;
        font-size: clamp(1rem, 3vw, 1.2rem);
        animation: sparkleFloat 1s ease-out forwards;
        will-change: transform, opacity;
      }

      /* ===== ANIMATIONS ===== */
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes slideDown {
        from {
          opacity: 0;
          transform: translateY(-30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes float {
        0% {
          bottom: -50px;
          opacity: 0;
        }
        10% {
          opacity: 0.7;
        }
        90% {
          opacity: 0.7;
        }
        100% {
          bottom: 100vh;
          opacity: 0;
          transform: translateX(50px);
        }
      }

      @keyframes shake {
        0%,
        100% {
          transform: translateX(0);
        }
        25% {
          transform: translateX(-8px);
        }
        75% {
          transform: translateX(8px);
        }
      }

      @keyframes sparkleFloat {
        0% {
          opacity: 1;
          transform: translate(0, 0) scale(1);
        }
        100% {
          opacity: 0;
          transform: translate(var(--tx), var(--ty)) scale(0);
        }
      }

      /* ===== MODAL STYLES ===== */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        z-index: 1000;
        align-items: center;
        justify-content: center;
        animation: fadeIn 0.3s ease;
        padding: 20px;
      }

      .modal.active {
        display: flex;
      }

      .modal-content {
        position: relative;
        max-width: 95vw;
        max-height: 95vh;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .modal-content img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        border-radius: 10px;
        max-height: 90vh;
      }

      .modal-close {
        position: fixed;
        top: 15px;
        right: 15px;
        background: rgba(255, 255, 255, 0.95);
        border: none;
        width: 45px;
        height: 45px;
        border-radius: 50%;
        font-size: 1.5rem;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        z-index: 1001;
        touch-action: manipulation;
        box-shadow: 0 3px 15px rgba(0, 0, 0, 0.3);
      }

      .modal-close:active {
        transform: scale(0.9);
        background: white;
      }

      /* ===== MUSIC TOGGLE ===== */
      .music-toggle {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: linear-gradient(135deg, #ff1493 0%, #d91e63 100%);
        color: white;
        border: none;
        width: 55px;
        height: 55px;
        border-radius: 50%;
        font-size: 1.3rem;
        cursor: pointer;
        box-shadow: 0 5px 20px rgba(217, 30, 99, 0.4);
        transition: all 0.3s ease;
        z-index: 100;
        touch-action: manipulation;
      }

      .music-toggle:active {
        transform: scale(0.9);
        box-shadow: 0 3px 15px rgba(217, 30, 99, 0.5);
      }

      /* ===== MOBILE OPTIMIZATIONS ===== */
      @media (max-width: 480px) {
        .container {
          padding: 15px;
        }

        .pin-page,
        .love-page {
          padding: 15px;
        }

        .pin-input-container {
          gap: 8px;
        }

        .gallery-section {
          margin-top: 30px;
          padding: 0 5px;
        }

        .gallery-grid {
          gap: 10px;
        }

        .music-toggle {
          width: 50px;
          height: 50px;
          font-size: 1.2rem;
          bottom: 15px;
          right: 15px;
        }

        .modal {
          padding: 10px;
        }

        .modal-close {
          top: 10px;
          right: 10px;
          width: 40px;
          height: 40px;
          font-size: 1.3rem;
        }
      }

      /* Landscape mobile */
      @media (max-height: 500px) and (orientation: landscape) {
        .container {
          min-height: auto;
          padding: 10px;
        }

        .pin-page,
        .love-page {
          padding: 10px;
        }

        .pin-title,
        .love-main-text {
          margin-bottom: 8px;
        }

        .pin-subtitle {
          margin-bottom: 15px;
        }

        .love-message {
          margin-bottom: 15px;
          line-height: 1.6;
        }

        .gallery-section {
          margin-top: 20px;
        }

        .floating-hearts {
          display: none;
        }
      }

      /* Prevent zoom on double tap */
      button {
        touch-action: manipulation;
      }

      input {
        touch-action: manipulation;
      }
    </style>
  </head>
  <body>
    <!-- Floating Hearts Background -->
    <div class="floating-hearts" id="floatingHearts">
      <div class="heart">‚ù§Ô∏è</div>
      <div class="heart">üíï</div>
      <div class="heart">üíñ</div>
      <div class="heart">üíó</div>
      <div class="heart">üíù</div>
      <div class="heart">üíì</div>
      <div class="heart">üíû</div>
      <div class="heart">üíò</div>
      <div class="heart">üíü</div>
    </div>

    <!-- Main Container -->
    <div class="container">
      <!-- PIN PAGE -->
      <div class="pin-page" id="pinPage">
        <h1 class="pin-title">üíñ ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ ‚ù§Ô∏è</h1>
        <p class="pin-subtitle">‡πÉ‡∏™‡πà‡∏ß‡∏±‡∏ô‡∏Ñ‡∏£‡∏ö‡∏£‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤</p>

        <div class="pin-input-container">
          <input
            type="tel"
            class="pin-input"
            id="pin1"
            maxlength="1"
            placeholder="0"
            inputmode="numeric"
            pattern="[0-9]*"
          />
          <input
            type="tel"
            class="pin-input"
            id="pin2"
            maxlength="1"
            placeholder="0"
            inputmode="numeric"
            pattern="[0-9]*"
          />
          <input
            type="tel"
            class="pin-input"
            id="pin3"
            maxlength="1"
            placeholder="0"
            inputmode="numeric"
            pattern="[0-9]*"
          />
          <input
            type="tel"
            class="pin-input"
            id="pin4"
            maxlength="1"
            placeholder="0"
            inputmode="numeric"
            pattern="[0-9]*"
          />
        </div>

        <button class="pin-button" id="pinButton">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏´‡∏±‡∏ß‡πÉ‡∏à ‚ù§Ô∏è</button>
        <div class="error-message" id="errorMessage"></div>
      </div>

      <!-- LOVE PAGE -->
      <div class="love-page hidden" id="lovePage">
        <h1 class="love-main-text">Happy Valentine's Day üíñ</h1>
        <h2 class="love-name" id="loverName">‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</h2>

        <p class="love-message" id="loveMessage">
          ‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏ô‡∏µ‡πâ ‡∏â‡∏±‡∏ô‡∏≠‡∏¢‡∏≤‡∏Å‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤<br />
          ‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô<br />
          ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á‡∏Ç‡πâ‡∏≤‡∏á‡∏â‡∏±‡∏ô‡πÄ‡∏™‡∏°‡∏≠<br />
          ‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏û‡∏¥‡πÄ‡∏®‡∏©<br />
          ‡∏â‡∏±‡∏ô‡∏£‡∏±‡∏Å‡∏Ñ‡∏∏‡∏ì‡∏°‡∏≤‡∏Å‡πÜ üíï
        </p>

        <button class="kiss-button" id="kissButton">‡∏Å‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡∏à‡∏∏‡πä‡∏ö üíã</button>

        <!-- GALLERY SECTION -->
        <div class="gallery-section">
          <h3 class="gallery-title">üì∏ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤</h3>
          <div class="gallery-grid" id="galleryGrid">
            <!-- Gallery items will be generated by JavaScript -->
          </div>
        </div>
      </div>
    </div>

    <!-- Image Modal -->
    <div class="modal" id="imageModal">
      <button class="modal-close" id="modalClose">‚úï</button>
      <div class="modal-content" id="modalContent">
        <img id="modalImage" src="" alt="Full size image" />
      </div>
    </div>

    <!-- Music Toggle Button -->
    <button class="music-toggle" id="musicToggle" title="Toggle Music">
      üéµ
    </button>

    <script>
      // ===== CONFIGURATION =====
      const CONFIG = {
        correctPin: "1402",
        loverName: "‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô",
        galleryImages: [
          "https://images.unsplash.com/photo-1518895949257-7621c3c786d7?w=500&h=500&fit=crop",
          "https://images.unsplash.com/photo-1516062423079-7ca13cdc7f5a?w=500&h=500&fit=crop",
          "https://images.unsplash.com/photo-1518895949257-7621c3c786d7?w=500&h=500&fit=crop",
          "https://images.unsplash.com/photo-1516062423079-7ca13cdc7f5a?w=500&h=500&fit=crop",
          "https://images.unsplash.com/photo-1518895949257-7621c3c786d7?w=500&h=500&fit=crop",
          "https://images.unsplash.com/photo-1516062423079-7ca13cdc7f5a?w=500&h=500&fit=crop",
        ],
      };

      // ===== PIN PAGE LOGIC =====
      const pinInputs = document.querySelectorAll(".pin-input");
      const pinButton = document.getElementById("pinButton");
      const errorMessage = document.getElementById("errorMessage");
      const pinPage = document.getElementById("pinPage");
      const lovePage = document.getElementById("lovePage");

      // Prevent zoom on focus (iOS)
      pinInputs.forEach((input) => {
        input.addEventListener("focus", function () {
          this.style.fontSize = "16px"; // Prevents iOS zoom
        });
      });

      // Auto-focus next input
      pinInputs.forEach((input, index) => {
        input.addEventListener("input", (e) => {
          e.target.value = e.target.value.replace(/[^0-9]/g, "");

          if (e.target.value && index < pinInputs.length - 1) {
            pinInputs[index + 1].focus();
          }
        });

        input.addEventListener("keydown", (e) => {
          if (e.key === "Backspace" && !input.value && index > 0) {
            pinInputs[index - 1].focus();
          }
        });

        // Prevent default action on Enter key
        input.addEventListener("keypress", (e) => {
          if (e.key === "Enter") {
            e.preventDefault();
            checkPin();
          }
        });
      });

      // Check PIN
      pinButton.addEventListener("click", checkPin);

      function checkPin() {
        const pin = Array.from(pinInputs)
          .map((input) => input.value)
          .join("");

        if (pin.length !== 4) {
          showError("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å PIN 4 ‡∏´‡∏•‡∏±‡∏Å");
          return;
        }

        if (pin === CONFIG.correctPin) {
          errorMessage.textContent = "";
          pinPage.classList.add("hidden");
          lovePage.classList.remove("hidden");
          initializeGallery();
          createSparkles();

          // Scroll to top smoothly
          window.scrollTo({ top: 0, behavior: "smooth" });
        } else {
          showError("‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ô‡∏∞‡∏Ñ‡∏ô‡πÄ‡∏Å‡πà‡∏á üíï");
          pinInputs.forEach((input) => (input.value = ""));
          pinInputs[0].focus();
        }
      }

      function showError(message) {
        errorMessage.textContent = message;
        errorMessage.style.animation = "none";
        setTimeout(() => {
          errorMessage.style.animation = "shake 0.5s ease-in-out";
        }, 10);
      }

      // ===== LOVE PAGE LOGIC =====
      document.getElementById("loverName").textContent = CONFIG.loverName;

      // Kiss button
      document
        .getElementById("kissButton")
        .addEventListener("click", createSparkles);

      function createSparkles() {
        const sparkles = ["‚ú®", "üí´", "‚≠ê", "üåü", "üíñ", "üíï", "üíó"];
        const count = window.innerWidth < 480 ? 15 : 20;

        for (let i = 0; i < count; i++) {
          const sparkle = document.createElement("div");
          sparkle.className = "sparkle-particle";
          sparkle.textContent =
            sparkles[Math.floor(Math.random() * sparkles.length)];

          const x = Math.random() * window.innerWidth;
          const y = Math.random() * window.innerHeight;
          sparkle.style.left = x + "px";
          sparkle.style.top = y + "px";

          const tx = (Math.random() - 0.5) * 150;
          const ty = (Math.random() - 0.5) * 150;
          sparkle.style.setProperty("--tx", tx + "px");
          sparkle.style.setProperty("--ty", ty + "px");

          document.body.appendChild(sparkle);

          setTimeout(() => sparkle.remove(), 1000);
        }
      }

      // ===== GALLERY LOGIC =====
      function initializeGallery() {
        const galleryGrid = document.getElementById("galleryGrid");
        galleryGrid.innerHTML = "";

        CONFIG.galleryImages.forEach((imageUrl, index) => {
          const galleryItem = document.createElement("div");
          galleryItem.className = "gallery-item";

          const img = document.createElement("img");
          img.src = imageUrl;
          img.alt = `Memory ${index + 1}`;
          img.loading = "lazy"; // Lazy loading for better performance

          galleryItem.appendChild(img);
          galleryItem.addEventListener("click", () => openModal(imageUrl));

          galleryGrid.appendChild(galleryItem);
        });
      }

      // Modal functions
      const modal = document.getElementById("imageModal");
      const modalImage = document.getElementById("modalImage");
      const modalClose = document.getElementById("modalClose");

      function openModal(imageSrc) {
        modalImage.src = imageSrc;
        modal.classList.add("active");
        document.body.style.overflow = "hidden"; // Prevent scroll
      }

      function closeModal() {
        modal.classList.remove("active");
        document.body.style.overflow = ""; // Restore scroll
      }

      modalClose.addEventListener("click", (e) => {
        e.stopPropagation();
        closeModal();
      });

      modal.addEventListener("click", (e) => {
        if (e.target === modal) closeModal();
      });

      // ===== MUSIC TOGGLE =====
      const musicToggle = document.getElementById("musicToggle");
      let isPlaying = false;

      musicToggle.addEventListener("click", () => {
        isPlaying = !isPlaying;
        musicToggle.textContent = isPlaying ? "üé∂" : "üéµ";
      });

      // ===== INITIALIZE =====
      window.addEventListener("load", () => {
        pinInputs[0].focus();
      });

      // Prevent pull-to-refresh on mobile
      document.body.addEventListener(
        "touchmove",
        (e) => {
          if (e.touches.length > 1) {
            e.preventDefault();
          }
        },
        { passive: false },
      );
    </script>
  </body>
</html>

